@using BTL_QuanLyBanDienThoai.Models.ViewModel;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{

}
@model ShopViewModel

<div class="bg0 m-t-23 p-t-140 p-b-100">
	<div class="container">
		<div class="flex-w flex-sb-m p-b-52">
			<div class="flex-w flex-l-m filter-tope-group m-tb-10">
				<button class="btnAll stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" data-filter="*">
					All Products
				</button>
				@foreach (var item in Model.Category)
				{
					<button class="btn_cate stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" data-id="@item.Id" data-filter=".@item.Id">
						@item.Name
					</button>

				}

			</div>

			<div class="flex-w flex-c-m m-tb-10">
				<div class="flex-c-m stext-106 cl6 size-104 bor4 pointer hov-btn3 trans-04 m-r-8 m-tb-4 js-show-filter">
					<i class="icon-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-filter-list"></i>
					<i class="icon-close-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
					Filter
				</div>

				<div class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4 js-show-search">
					<i class="icon-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-search"></i>
					<i class="icon-close-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
					Search
				</div>
			</div>

			<!-- Search product -->
			<div class="dis-none panel-search w-full p-t-10 p-b-15">
				<form method="get" action="">
					<div class="bor8 dis-flex p-l-15">
						<button class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
							<i class="zmdi zmdi-search"></i>
						</button>

						<input class="mtext-107 cl2 size-114 plh2 p-r-15" type="text" name="search-product" placeholder="Search">
					</div>
				</form>
			</div>

			<!-- Filter -->
			<div class="dis-none panel-filter w-full p-t-10">
				<div class="wrap-filter flex-w bg6 w-full p-lr-40 p-t-27 p-lr-15-sm">
					<div class="filter-col1 p-r-15 p-b-27">
						<div class="mtext-102 cl2 p-b-15">
							Sort By
						</div>

						<ul>
							<li class="p-b-6">
								<a href="#" class="filter-link stext-106 trans-04">
									Default
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" class="filter-link stext-106 trans-04">
									Popularity
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" class="filter-link stext-106 trans-04">
									Average rating
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" class="filter-link stext-106 trans-04 filter-link-active">
									Newness
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" class="filter-link stext-106 trans-04">
									Price: Low to High
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" class="filter-link stext-106 trans-04">
									Price: High to Low
								</a>
							</li>
						</ul>
					</div>

					<div class="filter-col2 p-r-15 p-b-27">
						<div class="mtext-102 cl2 p-b-15">
							Price
						</div>

						<ul>
							<li class="p-b-6">
								<a href="#" class="filter-link stext-106 trans-04 filter-link-active">
									All
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" price-max="500" price-min="0" class="filter_price filter-link stext-106 trans-04">
									$0.00 - $50.00
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" price-max="1000" price-min="501" class="filter_price filter-link stext-106 trans-04">
									$50.00 - $100.00
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" price-max="1500" price-min="1001" class="filter_price filter-link stext-106 trans-04">
									$100.00 - $150.00
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" price-max="2000" price-min="1501" class="filter_price filter-link stext-106 trans-04">
									$150.00 - $200.00
								</a>
							</li>

							<li class="p-b-6">
								<a href="#" price-max="200000000" price-min="2001" class="filter_price filter-link stext-106 trans-04">
									$2000.00+
								</a>
							</li>
						</ul>
					</div>

					<div class="filter-col3 p-r-15 p-b-27">
						<div class="mtext-102 cl2 p-b-15">
							Color
						</div>

						<ul>
							<li class="p-b-6">
								<span class="fs-15 lh-12 m-r-6" style="color: #222;">
									<i class="zmdi zmdi-circle"></i>
								</span>

								<a href="#" class="filter-link stext-106 trans-04">
									Black
								</a>
							</li>

							<li class="p-b-6">
								<span class="fs-15 lh-12 m-r-6" style="color: #4272d7;">
									<i class="zmdi zmdi-circle"></i>
								</span>

								<a href="#" class="filter-link stext-106 trans-04 filter-link-active">
									Blue
								</a>
							</li>

							<li class="p-b-6">
								<span class="fs-15 lh-12 m-r-6" style="color: #b3b3b3;">
									<i class="zmdi zmdi-circle"></i>
								</span>

								<a href="#" class="filter-link stext-106 trans-04">
									Grey
								</a>
							</li>

							<li class="p-b-6">
								<span class="fs-15 lh-12 m-r-6" style="color: #00ad5f;">
									<i class="zmdi zmdi-circle"></i>
								</span>

								<a href="#" class="filter-link stext-106 trans-04">
									Green
								</a>
							</li>

							<li class="p-b-6">
								<span class="fs-15 lh-12 m-r-6" style="color: #fa4251;">
									<i class="zmdi zmdi-circle"></i>
								</span>

								<a href="#" class="filter-link stext-106 trans-04">
									Red
								</a>
							</li>

							<li class="p-b-6">
								<span class="fs-15 lh-12 m-r-6" style="color: #aaa;">
									<i class="zmdi zmdi-circle-o"></i>
								</span>

								<a href="#" class="filter-link stext-106 trans-04">
									White
								</a>
							</li>
						</ul>
					</div>

					<div class="filter-col4 p-b-27">
						<div class="mtext-102 cl2 p-b-15">
							Tags
						</div>

						<div class="flex-w p-t-4 m-r--5">
							<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
								Fashion
							</a>

							<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
								Lifestyle
							</a>

							<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
								Denim
							</a>

							<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
								Streetstyle
							</a>

							<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
								Crafts
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row isotope-grid">
			@foreach(var item in Model.Product){
			<div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item @item.Category.Id">
				<!-- Block2 -->
				<div class="block2">
					<div class="block2-pic hov-img0">
						<img src="@item.ImageDefault" alt="IMG-PRODUCT">

						<a asp-action="Index" asp-controller="ProductDetails" asp-route-id="@item.Id" class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04">
							Quick View
						</a>
					</div>

					<div class="block2-txt flex-w flex-t p-t-14">
						<div class="block2-txt-child1 flex-col-l ">
								<a asp-action="Index" asp-controller="ProductDetails" asp-route-id="@item.Id" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
								@item.Name
							</a>

							<span class="stext-105 cl3">
								@item.Price
							</span>
						</div>

						<div class="block2-txt-child2 flex-r p-t-3">
							<a href="#" class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
								<img class="icon-heart1 dis-block trans-04" src="~/web/assets/images/icons/icon-heart-01.png" alt="ICON">
								<img class="icon-heart2 dis-block trans-04 ab-t-l" src="~/web/assets/images/icons/icon-heart-02.png" alt="ICON">
							</a>
						</div>
					</div>
				</div>
			</div>
			}
		</div>
	</div>
</div>
<script>
	$(document).ready(function () {
		$(".filter_price").click(function () {
			let priceMax = $(this).attr('price-max');
			let priceMin = $(this).attr('price-min');
			searchAjax(priceMin, priceMax)
		});

		
	});
</script>
 <script>
	function searchAjax(input1,input2) {
        $.ajax({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            },
            url: '/products/ajax-search-price',
            type: 'GET',
            dataType: 'json',
			data: { priceMin: input1, priceMax: input2 },
            success: function (data) {
                if (data.success) {
					console.log(data)
					$(".isotope-grid").empty();
                    let html = "";
                    let products = data.data;
                    $.each(products, function (key, value) {
                        let price = value.price;
                        var productDetail = `/home/products/detail/${value.id}`;

						html += `<div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item ${value.CategoryId}">`;
						html += `<div class="block2">`;
						html += `<div class="block2-pic hov-img0">`;
						html += `<img src="${value.imageDefault}" alt="IMG-PRODUCT">`;
						html += `<a href="${productDetail}" class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1"> Quick View </a>`;
						html += `</div>`;
						html += `<div class="block2-txt flex-w flex-t p-t-14">`;
						html += `<div class="block2-txt-child1 flex-col-l ">`;
						html += `<a href="${productDetail}" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">`
						html += `${value.name}`;
						html += `</a>`;
						html += `<span class="stext-105 cl3">`;
						html += `$${price}`;
						html += `</span>`;
						html += `</div>`;
						html += `<div class="block2-txt-child2 flex-r p-t-3">`;
						html += `<a href="#" class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">`;
						html += `<img class="icon-heart1 dis-block trans-04"`;
						html += `src="@Url.Content("~/web/assets/images/icons/icon-heart-01.png")" alt="ICON">`;
						html += ` <img class="icon-heart2 dis-block trans-04 ab-t-l"`;
						html += `src="@Url.Content("~/web/assets/images/icons/icon-heart-02.png")" alt="ICON">`;
						html += `</a>`;
						html += `</div>`;
						html += `</div>`;
						html += `</div>`;
						html += `</div>`;
                    });
					$(".isotope-grid").append(html);
                } else {
                    console.log('Lỗi xử lý trên máy chủ: ' + data.error);
                }
            },
            error: function () {
                console.log('Lỗi khi thực hiện yêu cầu.');
            }
        });
    }
</script>